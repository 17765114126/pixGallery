webpackJsonp([13],{627:function(t,e,a){function i(t){a(701)}var s=a(11)(a(656),a(741),i,null,null);t.exports=s.exports},656:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(60),s=a(67);e.default={data:function(){return{dynamicTags:[],tags:[],metas:[],inputVisible:!1,inputValue:"",id:null,metasId:"",original:!1,author:"",content:"",source:"",isCommend:1}},methods:{handleClose:function(t){this.tags.splice(this.tags.indexOf(t),1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var t=this.inputValue;t&&this.tags.push(t),this.inputVisible=!1,this.inputValue=""},addInput:function(t){this.tags=this.tags.concat(t)},tagList:function(){var t=this;i.a.post(s.a.GET_TAG_LIST,{isCommend:this.isCommend}).then(function(e){if(0===e.data.code)for(var a=0;a<e.data.model.records.length;a++)t.dynamicTags=t.dynamicTags.concat(e.data.model.records[a].name);else t.$message(e.data.msg)},function(e){t.$message(e)})},metasList:function(){var t=this;i.a.post(s.a.GET_METAS_LIST,{}).then(function(e){0===e.data.code?t.metas=e.data.model:t.$message(e.data.msg)},function(e){t.$message(e)})},getMaterialInfo:function(){var t=this;if(""===this.$route.query.materialId&&void 0===this.$route.query.materialId)return!1;i.a.post(s.a.GET_MATERIAL_INFO,{id:this.$route.query.materialId}).then(function(e){if(0===e.data.code){t.id=e.data.model.id,t.author=e.data.model.author,t.content=e.data.model.content,t.source=e.data.model.source,t.metasId=e.data.model.metasId,t.original=!!e.data.model.original,t.dynamicTags=[];for(var a=0;a<e.data.model.tagList.length;a++)t.dynamicTags=t.dynamicTags.concat(e.data.model.tagList[a].name)}},function(e){t.$message(e)})},submitForm:function(){var t=this;return""===this.content?(this.$message("句子内容不能为空"),!1):""===this.metasId?(this.$message("分类不能为空"),!1):void i.a.post(s.a.GET_MATERIAL_ADD,{id:this.id,original:this.original?1:0,author:this.author,content:this.content,source:this.source,dynamicTags:this.tags,metasId:this.metasId}).then(function(e){if(0!==e.data.code)return t.$message(e.data.msg),!1;t.$router.go(0)},function(e){t.$message(e)})}},mounted:function(){this.tagList(),this.metasList(),this.getMaterialInfo()},watch:{"$route.query.materialId":function(t,e){"/issue"===this.$route.path&&t!==e&&(this.id=t,this.getMaterialInfo())}}}},701:function(t,e){},741:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"10px"},attrs:{id:"issue"}},[a("el-form",{staticClass:"login_form",attrs:{"label-position":"left","hide-required-asterisk":!0,size:"medium"}},[a("div",{staticStyle:{color:"#70cbb0"}},[t._v("发布您喜欢的素材")]),t._v(" "),a("el-form-item",{staticClass:"item",attrs:{label:"原创:","label-width":"50px"}},[a("el-checkbox",{model:{value:t.original,callback:function(e){t.original=e},expression:"original"}})],1),t._v(" "),a("el-form-item",{staticClass:"item",staticStyle:{width:"450px"},attrs:{label:"作者:","label-width":"50px"}},[a("el-input",{attrs:{placeholder:"请输入作者"},model:{value:t.author,callback:function(e){t.author=e},expression:"author"}})],1),t._v(" "),a("el-form-item",{staticClass:"item",attrs:{label:"出处:","label-width":"50px"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{type:"text",placeholder:"请输入出处"},model:{value:t.source,callback:function(e){t.source=e},expression:"source"}})],1),t._v(" "),a("el-form-item",{staticClass:"item",attrs:{label:"句子:","label-width":"50px"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",rows:5,placeholder:"向世界分享你的句子"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v(" "),a("el-form-item",{staticClass:"item",attrs:{label:"分类:","label-width":"50px"}},[a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.metasId,callback:function(e){t.metasId=e},expression:"metasId"}},t._l(t.metas,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{staticClass:"item",attrs:{label:"标签:","label-width":"50px"}},[t._l(t.tags,function(e){return a("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){t.handleClose(e)}}},[t._v("\n        "+t._s(e)+"\n      ")])}),t._v(" "),t.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleInputConfirm(e):null}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Tag")]),t._v(" "),a("el-popover",{attrs:{placement:"right",width:"292",trigger:"click"}},[t._l(t.dynamicTags,function(e){return a("el-tag",{key:e,attrs:{"disable-transitions":!1},on:{click:function(a){t.addInput(e)}}},[t._v("\n          "+t._s(e)+"\n        ")])}),t._v(" "),a("el-button",{attrs:{slot:"reference"},slot:"reference"},[t._v("推荐标签")])],2)],2),t._v(" "),a("el-button",{staticStyle:{"background-color":"rgba(130,187,232,0.1)",border:"1px solid #4494e6"},attrs:{type:"submit",size:"medium"},on:{click:function(e){t.submitForm()}}},[t._v("发 布\n      ")])],1)],1)},staticRenderFns:[]}}});