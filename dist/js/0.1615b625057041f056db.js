webpackJsonp([0],{633:function(t,e,i){function s(t){i(681)}var n=i(11)(i(663),i(721),s,null,null);t.exports=n.exports},639:function(t,e,i){"use strict";function s(t,e){return new r.a(function(i,s){o.a.post(t,e).then(function(t){i(t)},function(t){s(t)})})}function n(){var t=c.a.getters.getUserInfo;return new r.a(function(e,i){null===t?i(l):e(t)})}e.b=s,e.a=n;var a=i(102),r=i.n(a),o=i(60),c=i(22),l={code:0,msg:"用户未登录"}},662:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(60),n=i(67);e.default={data:function(){return{materialList:[],current:1,size:10,total:0,pages:0}},methods:{getMaterialList:function(){var t=this;s.a.post(n.a.GET_MATERIAL_LIST,{current:this.current++,size:this.size,isEnshrine:1}).then(function(e){if(0!==e.data.code)return t.$message("已经到底了呦。。。"),!1;t.materialList=t.materialList.concat(e.data.model.records),t.current,e.data.model.current,t.total,e.data.model.total,t.pages,e.data.model.pages},function(e){t.$message(e)})},toMaterialInfo:function(t){this.$router.push({path:"/materialInfo",query:{materialId:t}})},enshrineSave:function(t){var e=this;s.a.post(n.a.GET_ENSHRINE_SAVE,{enshrineId:t,type:1}).then(function(t){e.$message(t.data.msg)},function(t){e.$message(t)})},enshrineCancel:function(t){var e=this;s.a.post(n.a.GET_ENSHRINE_CANCEL,{enshrineId:t}).then(function(t){e.$message(t.data.msg)},function(t){e.$message(t)})},likeSave:function(t){var e=this;s.a.post(n.a.GET_LIKE_SAVE,{likeId:t,type:1}).then(function(t){e.$message(t.data.msg)},function(t){e.$message(t)})},likeCancel:function(t){var e=this;s.a.post(n.a.GET_LILE_CANCEL,{likeId:t}).then(function(t){e.$message(t.data.msg)},function(t){e.$message(t)})}},mounted:function(){this.getMaterialList()}}},663:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(151),n=i.n(s),a=i(710),r=i.n(a),o=i(711),c=i.n(o),l=i(22),u=i(67),d=i(639),v=i(712),f=i.n(v);e.default={data:function(){return{selectIndex:3,personalCenter:[],suggestList:[],needUpdate:!1,userSetting:{isShow:!1}}},components:{enshrinelist:r.a,myMaterial:c.a,userSetting:f.a},methods:{selectSettingIndex:function(t){this.selectIndex=parseInt(t.target.getAttribute("data-index"))},initData:function(){var t=this;i.i(d.a)().then(function(e){i.i(d.b)(u.a.GET_PERSONAL_INFO,{userId:l.a.getters.getUserInfo.id||0}).then(function(e){t.personalCenter=e.data.model,t.suggestList=e.data.suggestList,t.userSetting=n()({},t.userSetting,e.data.model)},function(e){t.$message(e)})},function(e){t.$message(e)})},selectImage:function(){this.$refs.selectimgbtn.click()},showSubBtn:function(){this.needUpdate=!0,this.$message({text:"再次移动头像区域以上传图片, 点击提交之后请刷新页面, form提交表单的方法有点挫。。。",duration:6e3})},showSetting:function(t){this.userSetting.isShow=!0},saveInfo:function(t){this.userSetting.isShow=!1,this.personalCenter=n()({},this.personalCenter,t),l.a.dispatch({type:"set_UserInfo",data:this.personalCenter})}},computed:{},mounted:function(){var t=this;this.$nextTick(function(){t.initData()})}}},665:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(60),n=i(67);e.default={data:function(){return{materialList:[],current:1,size:10,total:0,pages:0}},methods:{getMaterialList:function(){var t=this;s.a.post(n.a.GET_MATERIAL_LIST,{current:this.current++,size:this.size,isMy:1}).then(function(e){if(0!==e.data.code)return t.$message("已经到底了呦。。。"),!1;t.materialList=t.materialList.concat(e.data.model.records),t.current,e.data.model.current,t.total,e.data.model.total,t.pages,e.data.model.pages},function(e){t.$message(e)})},toMaterialInfo:function(t){this.$router.push({path:"/materialInfo",query:{materialId:t}})},toIssue:function(t){this.$router.push({path:"/issue",query:{materialId:t}})},enshrineSave:function(t){var e=this;s.a.post(n.a.GET_ENSHRINE_SAVE,{enshrineId:t,type:1}).then(function(t){e.$message(t.data.msg)},function(t){e.$message(t)})},enshrineCancel:function(t){var e=this;s.a.post(n.a.GET_ENSHRINE_CANCEL,{enshrineId:t}).then(function(t){e.$message(t.data.msg)},function(t){e.$message(t)})},likeSave:function(t){var e=this;s.a.post(n.a.GET_LIKE_SAVE,{likeId:t,type:1}).then(function(t){e.$message(t.data.msg)},function(t){e.$message(t)})},likeCancel:function(t){var e=this;s.a.post(n.a.GET_LILE_CANCEL,{likeId:t}).then(function(t){e.$message(t.data.msg)},function(t){e.$message(t)})},materialDel:function(t){var e=this;s.a.post(n.a.GET_MATERIAL_DEL,{ids:t}).then(function(t){e.$message(t.data.msg)},function(t){e.$message(t)})}},mounted:function(){this.getMaterialList()}}},667:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(151),n=i.n(s),a=i(60),r=i(67);e.default={data:function(){return{newUserInfo:this.userSetting,newavatarname:"",newavatar:""}},props:{userSetting:{type:Object,default:{isShow:!1,id:0,username:"",headImg:"",realname:"",signature:"",mailbox:"",sex:0}}},methods:{getPicUrl:function(t){var e=this;this.newavatarname=t.target.files[0].name+"正在上传中...";var i=t.target.files[0],s=new FormData;s.append("file",i),s.append("userId",this.userSetting.id),a.a.upload(r.a.UPLOAD,s).then(function(t){"1"===t.data.code?(e.newUserInfo.avatar=t.data.imageUrl+"?data="+Math.random(),e.newavatar=t.data.imageUrl+"?data="+Math.random(),e.newavatarname="头像上传成功，请完善其他信息并保存",e.$message(t.data.msg)):(e.newavatarname=t.data.msg,e.$message(t.data.msg))}).catch(function(t){console.log(t)})},exit:function(){this.$emit("exit",this.newUserInfo)},save:function(){var t=this;a.a.post(r.a.UPDATE_USER_INFO,{id:this.userSetting.id,realname:this.userSetting.realname,signature:this.userSetting.signature,mobile:this.userSetting.mobile,mailbox:this.userSetting.mailbox}).then(function(e){t.newUserInfo=n()({isShow:!1},e.data.msg),t.$emit("save",t.newUserInfo)},function(t){console.log(t)})}}}},677:function(t,e){},681:function(t,e){},698:function(t,e){},699:function(t,e){},710:function(t,e,i){function s(t){i(698)}var n=i(11)(i(662),i(738),s,null,null);t.exports=n.exports},711:function(t,e,i){function s(t){i(677)}var n=i(11)(i(665),i(717),s,null,null);t.exports=n.exports},712:function(t,e,i){function s(t){i(699)}var n=i(11)(i(667),i(739),s,"data-v-e292e230",null);t.exports=n.exports},717:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"myMaterial music_list_container"},[i("div",{staticClass:"content"},[t._l(t.materialList,function(e){return i("div",[e.content.length>35?i("div",[i("el-link",{attrs:{underline:!1},domProps:{innerHTML:t._s(e.content.substring(0,50)+"......")},nativeOn:{click:function(i){t.toMaterialInfo(e.id)}}})],1):i("div",[i("el-link",{attrs:{underline:!1},on:{click:function(i){t.toMaterialInfo(e.id)}}},[t._v(t._s(e.content))])],1),t._v(" "),i("div",{staticStyle:{"text-align":"left",margin:"auto",width:"600px"}},[0===e.isLike?i("i",{staticClass:"el-icon-lollipop",attrs:{title:"点赞"},on:{click:function(i){t.likeSave(e.id)}}}):t._e(),t._v(" "),1===e.isLike?i("i",{staticClass:"el-icon-magic-stick",attrs:{title:"取消点赞"},on:{click:function(i){t.likeCancel(e.id)}}}):t._e(),t._v("\n                 \n              "),i("i",{staticClass:"el-icon-view",attrs:{title:"阅读量"}},[t._v(" "+t._s(e.hits))]),t._v("\n                 \n              "),0===e.isEnshrine?i("i",{staticClass:"el-icon-star-off",attrs:{title:"收藏"},on:{click:function(i){t.enshrineSave(e.id)}}}):t._e(),t._v(" "),1===e.isEnshrine?i("i",{staticClass:"el-icon-star-on",attrs:{title:"取消收藏"},on:{click:function(i){t.enshrineCancel(e.id)}}}):t._e(),t._v("\n                 \n              "),i("i",{staticClass:"el-icon-chat-dot-square",attrs:{title:"评论"},on:{click:function(i){t.toMaterialInfo(e.id)}}}),t._v(" "),t._v("\n                 \n              "),i("i",{staticClass:"el-icon-edit",attrs:{title:"修改"},on:{click:function(i){t.toIssue(e.id)}}}),t._v("\n                 \n              "),i("i",{staticClass:" el-icon-delete",attrs:{title:"删除"},on:{click:function(i){t.materialDel(e.id)}}}),t._v("\n                 \n              -------------   "+t._s(e.createTime)+"  "+t._s(e.source)+"\n          ")]),t._v(" "),i("br")])}),t._v(" "),i("div",{staticStyle:{"background-color":"rgb(49 154 138)","text-align":"center"},on:{click:function(e){t.getMaterialList()}}},[t._v("加载更多内容")])],2)])},staticRenderFns:[]}},721:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-info"},[i("userSetting",{attrs:{userSetting:t.userSetting},on:{exit:t.saveInfo,save:t.saveInfo}}),t._v(" "),i("div",{staticClass:"info-content"},[t.personalCenter&&t.personalCenter?i("div",{staticClass:"user-basic-info"},[i("div",{staticClass:"user-basic-l"},[i("div",{staticClass:"user-avatar"},[i("div",{staticClass:"image-avatar",style:{backgroundImage:"url("+t.personalCenter.headImg+")",backgroundSize:"cover",backgroundPosition:"center"}})]),t._v(" "),i("div",{staticClass:"user-basic"},[i("h3",{staticClass:"user-nickname"},[t._v(t._s((t.personalCenter.realname,t.personalCenter.realname)))]),t._v(" "),i("p",{staticClass:"user-disc"},[t._v(t._s(""!==t.personalCenter.signature?t.personalCenter.signature:"暂无描述"))])])]),t._v(" "),i("div",{staticClass:"user-basic-r"},[i("div",{staticClass:"icon-setinfo",attrs:{title:"累计点赞数量"}},[i("i",{staticClass:"icon-music"}),t._v(" "),i("span",{staticClass:"count"},[t._v(t._s(t.personalCenter.musicCount||0))])]),t._v(" "),i("div",{staticClass:"icon-setinfo need-click",attrs:{title:"个人设置"},on:{click:t.showSetting}},[i("i",{staticClass:"icon-setting"}),t._v(" "),i("span",{staticClass:"count"},[t._v("个人设置")])])])]):t._e(),t._v(" "),i("div",{staticClass:"mode-info"}),t._v(" "),i("div",{staticClass:"user-detail-info"},[i("ul",{staticClass:"detail-title"},[i("li",{staticClass:"title-list",class:3===t.selectIndex?"active":"",attrs:{"data-index":"3"},on:{click:t.selectSettingIndex}},[t._v("我的素材")]),t._v(" "),i("li",{staticClass:"title-list",class:1===t.selectIndex?"active":"",attrs:{"data-index":"1"},on:{click:t.selectSettingIndex}},[t._v("我的收藏")])]),t._v(" "),i("div",{staticClass:"detail-content"},[i("div",{staticClass:"content-info list_content_info music-list",class:1===t.selectIndex?"active":""},[t._m(0),t._v(" "),i("enshrinelist",{attrs:{showdelicon:"false"}})],1),t._v(" "),i("div",{staticClass:"content-info list_content_info music-list",class:3===t.selectIndex?"active":""},[t._m(1),t._v(" "),i("myMaterial",{attrs:{showdelicon:"false"}})],1),t._v(" "),i("div",{staticClass:"content-info suggest-info",class:2===t.selectIndex?"active":""},[t._l(t.suggestList,function(e){return t.suggestList?i("li",[t._v("你在 "+t._s(e.suggestTime.split(" ")[0])+"日 给作者留言 # "+t._s(e.suggestContent)+" #")]):t._e()}),t._v(" "),t.suggestList?t._e():i("li",[t._v("暂无留言哦，您可以在"),i("router-link",{attrs:{to:"/about/suggest"}},[t._v("留言板")]),t._v("中给作者留言，提出您的宝贵意见和建议")],1)],2)])])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"music_list_title border-1px"},[i("span",{staticClass:"music_index"}),t._v(" "),i("span",{staticClass:"music_name"},[t._v("收藏内容")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"music_list_title border-1px"},[i("span",{staticClass:"music_index"}),t._v(" "),i("span",{staticClass:"music_name"},[t._v("内容")])])}]}},738:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"enshrinelist"},[i("div",{staticClass:"content"},[t._l(t.materialList,function(e){return i("div",[e.content.length>35?i("div",[i("el-link",{attrs:{underline:!1},domProps:{innerHTML:t._s(e.content.substring(0,50)+"......")},nativeOn:{click:function(i){t.toMaterialInfo(e.id)}}})],1):i("div",[i("el-link",{attrs:{underline:!1},on:{click:function(i){t.toMaterialInfo(e.id)}}},[t._v(t._s(e.content))])],1),t._v(" "),i("div",{staticStyle:{"text-align":"left",margin:"auto",width:"600px"}},[0===e.isLike?i("i",{staticClass:"el-icon-lollipop",attrs:{title:"点赞"},on:{click:function(i){t.likeSave(e.id)}}}):t._e(),t._v(" "),1===e.isLike?i("i",{staticClass:"el-icon-magic-stick",attrs:{title:"取消点赞"},on:{click:function(i){t.likeCancel(e.id)}}}):t._e(),t._v("\n                 \n              "),i("i",{staticClass:"el-icon-view",attrs:{title:"阅读量"}},[t._v(" "+t._s(e.hits))]),t._v("\n                 \n              "),0===e.isEnshrine?i("i",{staticClass:"el-icon-star-off",attrs:{title:"收藏"},on:{click:function(i){t.enshrineSave(e.id)}}}):t._e(),t._v(" "),1===e.isEnshrine?i("i",{staticClass:"el-icon-star-on",attrs:{title:"取消收藏"},on:{click:function(i){t.enshrineCancel(e.id)}}}):t._e(),t._v("\n                 \n              "),i("i",{staticClass:"el-icon-chat-dot-square",attrs:{title:"评论"},on:{click:function(i){t.toMaterialInfo(e.id)}}}),t._v(" "),t._v("\n                 \n              -------------   "+t._s(e.createTime)+"  "+t._s(e.source)+"\n            ")]),t._v(" "),i("br")])}),t._v(" "),i("div",{staticStyle:{"background-color":"rgb(49 154 138)","text-align":"center"},on:{click:function(e){t.getMaterialList()}}},[t._v("加载更多内容")])],2)])},staticRenderFns:[]}},739:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[t.userSetting.isShow?i("div",{staticClass:"user-setting"},[i("div",{staticClass:"content"},[i("div",{staticClass:"useravatar"},[i("img",{attrs:{src:t.userSetting.headImg}}),i("div",{staticClass:"upload"},[i("div",{staticClass:"text"},[t._v("点击上传")]),i("input",{attrs:{type:"file",accept:"image/*"},on:{change:function(e){t.getPicUrl(e)}}})]),i("div",{staticClass:"avatarname"},[t._v(t._s(t.newavatarname))])]),i("div",{staticClass:"nickname setting-list"},[i("div",{staticClass:"lable"},[t._v("昵称：")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.userSetting.realname,expression:"userSetting.realname"}],domProps:{value:t.userSetting.realname},on:{input:function(e){e.target.composing||t.$set(t.userSetting,"realname",e.target.value)}}})]),i("div",{staticClass:"mailbox setting-list"},[i("div",{staticClass:"lable"},[t._v("邮箱：")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.userSetting.mailbox,expression:"userSetting.mailbox"}],domProps:{value:t.userSetting.mailbox},on:{input:function(e){e.target.composing||t.$set(t.userSetting,"mailbox",e.target.value)}}})]),i("div",{staticClass:"mobile setting-list"},[i("div",{staticClass:"lable"},[t._v("手机号：")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.userSetting.mobile,expression:"userSetting.mobile"}],domProps:{value:t.userSetting.mobile},on:{input:function(e){e.target.composing||t.$set(t.userSetting,"mobile",e.target.value)}}})]),i("div",{staticClass:"userdisc setting-list"},[i("div",{staticClass:"lable"},[t._v("个人描述：")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.userSetting.signature,expression:"userSetting.signature"}],domProps:{value:t.userSetting.signature},on:{input:function(e){e.target.composing||t.$set(t.userSetting,"signature",e.target.value)}}})])]),i("div",{staticClass:"div-exit"},[i("span",{staticClass:"exit",on:{click:t.exit}},[t._v("退出")]),i("span",{staticClass:"save",on:{click:t.save}},[t._v("保存")])])]):t._e()])},staticRenderFns:[]}}});